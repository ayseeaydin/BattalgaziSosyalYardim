@model IEnumerable<BattalgaziSosyalYardim.Entities.Application>
@{
    Layout = "_Bootstrap5Layout";
    ViewData["Title"] = "Başvuru Listesi";
}

@section Styles {
    <!-- DataTables + Buttons (Bootstrap 5) -->
    <link href="https://cdn.datatables.net/1.13.8/css/dataTables.bootstrap5.min.css" rel="stylesheet" />
    <link href="https://cdn.datatables.net/buttons/2.4.1/css/buttons.bootstrap5.min.css" rel="stylesheet" />

    <style>
        body {
            background: url('/thema/img/belediye.jpg') no-repeat center center fixed;
            background-size: cover;
        }

        .list-shell {
            max-width: 1200px;
            margin: 60px auto;
            background: rgba(255,255,255,.95);
            border-radius: 16px;
            box-shadow: 0 8px 40px rgba(0,0,0,.12);
            padding: 24px;
        }

        .list-title {
            text-align: center;
            font-size: 1.6rem;
            font-weight: 600;
            margin-bottom: 16px;
        }
        /* DataTables küçük rötuşlar */
        .dt-buttons .btn {
            border-radius: 6px;
        }

        table.dataTable > thead > tr > th {
            white-space: nowrap;
        }
    </style>
}

<div class="list-shell">
    <div class="list-title">Başvuru Listesi</div>

    <div class="table-responsive">
        <table id="appsTable" class="table table-striped table-bordered w-100">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Veli T.C.</th>
                    <th>Veli Doğum Tarihi</th>
                    <th>Veli Ad</th>
                    <th>Veli Soyad</th>
                    <th>Telefon</th>
                    <th>Çocuk T.C.</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var a in Model)
                {
                    <tr>
                        <td>@a.Id</td>
                        <td>@a.MotherNationalId</td>
                        <td>@a.MotherBirthDate.ToString("dd.MM.yyyy")</td>
                        <td>@a.MotherFirstName</td>
                        <td>@a.MotherLastName</td>
                        <td>@a.PhoneNumber</td>
                        <td>@a.BabyNationalId</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

@section Scripts {
    <!-- DataTables + Buttons -->
    <script src="https://cdn.datatables.net/1.13.8/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.8/js/dataTables.bootstrap5.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.4.1/js/dataTables.buttons.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.bootstrap5.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.html5.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.print.min.js"></script>

    <script>
        $(function () {
            $('#appsTable').DataTable({
                dom: 'Bfrtip',                           // Buttons + filter arayüzü
                buttons: [
                    { extend: 'copyHtml5', className: 'btn btn-secondary btn-sm', text: 'Copy' },
                    { extend: 'csvHtml5',  className: 'btn btn-secondary btn-sm', text: 'CSV'  },
                    { extend: 'print',     className: 'btn btn-secondary btn-sm', text: 'Print'}
                ],
                order: [[0, 'desc']],                     // ID azalan
                pageLength: 10,
                language: {
                    url: 'https://cdn.datatables.net/plug-ins/1.13.8/i18n/tr.json'
                }
            });
        });
    </script>
}
